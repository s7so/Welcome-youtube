### ADR 0001: اختيار المعمارية — تطبيق ويب داخل الشبكة أم تطبيق مكتبي

Status: Proposed
Date: 2024-05-24

Context
- النظام الحالي تطبيق مكتبي قديم لإدارة الحضور، مع حاجة للتكامل مع جهاز FingerTec (برنامج Ingress أو SDK/DB).
- المتطلبات تشمل وصول HR ومدراء الأقسام لتقارير وحركات حضور داخل الشبكة، مع صيانة مركزية وأمان داخلي.

Options
1) تطبيق ويب داخل الشبكة (Python/Django أو Flask)
- مزايا: وصول عبر المتصفح، صيانة مركزية، قابلية توسع، إمكانات تكامل قوية، دعم أمان قياسي (OWASP، HTTPS).
- عيوب: يتطلب إعداد خادم تطبيق/قاعدة بيانات وشبكة داخلية منظمة.

2) تطبيق مكتبي (Python + PyQt/Qt أو .NET)
- مزايا: تجربة محلية، تحكم على الجهاز.
- عيوب: صيانة أصعب، تحديثات موزعة، تحديات في التوسعة والتكامل، اعتماد على بيئات المستخدمين.

3) هجين (Electron + خدمة محلية)
- مزايا: واجهة ويب مع تغليف مكتبي.
- عيوب: تعقيد إضافي دون قيمة حقيقية في بيئة داخلية.

Decision
- اعتماد تطبيق ويب داخل الشبكة باستخدام Python/Django للنسخة الأولى (MVP).
- الواجهة يمكن أن تبدأ بسيطة (Django + Django Admin للمكاتب الخلفية)، ثم واجهة حديثة لاحقاً إذا لزم (React/Vue) بدون تعطيل الـ MVP.

Consequences
- إيجابي: تحسين الوصول والصيانة والتوسع، سهولة إضافة ميزات مستقبلية، حوكمة أمنية أوضح.
- سلبي/قيود: يلزم إدارة خوادم وتعيين خطوط نشر داخلية؛ يتطلب بوابة تكامل موثوقة مع FingerTec.

Implementation Notes (MVP)
- Backend: Django + Django REST Framework.
- Auth: LDAP/AD داخل الشبكة أو SSO داخلي إن توفر، وإلا نظام مستخدمين داخلي.
- DB: PostgreSQL. تشفير at‑rest للحقول الحساسة.
- Integration: موائم FingerTec عبر API/SDK أو قراءة مباشرة لقاعدة بيانات Ingress (read‑only) + جدولة مزامنة.
- Ops: نشر داخل الشبكة (Docker اختياري)، HTTPS داخلي، نسخ احتياطي دوري.

Alternatives Considered
- البقاء على تطبيق مكتبي لتقليل التغيير: مرفوض بسبب مشاكل الصيانة والتوسع.
- واجهة هجينة: مؤجلة لما بعد الـ MVP إن ظهرت حاجة.